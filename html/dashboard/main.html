<!DOCTYPE html>
<html id="html">
<title>Your Videos</title>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"/>
<meta charset="UTF-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <!--note to joseph: should we fork this repl to test out the supabase saving system -->
<meta name="description" content="GoWDPK is an experimental instance by Jerry2009, where he just messes around with GoAnimate Wrapper."/>
<meta name="keywords" content="wrapper, ga, gowdpk, comedy world, animations, free animation, goanimate revival, how to get comedy world, family guy goanimate, ga, vyond legacy, vyond old lvm, how to get comedy world back on vyond, wrapper no download"/>
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<script src="https://josephanimate2021.github.io/lvm-static/api/jquery/index.js"></script>
<script src="https://replit.com/public/js/repl-auth-v2.js"></script>
<style>
  .videoOfTheMonth {
		font-size: 14px;
		padding: 10px 0;
		background-color: #03013b;
		text-align: center;
	}
.user-stats {
  background-color: #262626;
  color: white;
  padding: 30px;
  width: 300px;
  height: 500px;
  border: 34px;
}
  .message { 
		font-size: 14px;
		padding: 10px 0;
		background-color: darkorange;
		text-align: center;
	}
  .dropbtn {
    background-color: #3498DB;
    color: white;
    padding: 16px;
    font-size: 16px;
    border: none;
    cursor: pointer;
  }

  .dropbtn:hover, .dropbtn:focus {
    background-color: #2980B9;
  }

  .dropdown {
    position: relative;
    display: inline-block;
  }

  .dropdown-content {
    display: none;
    position: absolute;
    background-color: #f1f1f1;
    min-width: 160px;
    overflow: auto;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    z-index: 1;
  }

  .dropdown-content a {
    color: black;
    padding: 12px 16px;
    text-decoration: none;
    display: block;
  }

  .dropdown a:hover {background-color: #ddd;}

  .grid-container {
    display: grid;
    grid-template-columns: auto auto auto;
    padding: 10px;
    margin: auto;
  }
  .staff-picks-grid-container {
    display: grid;
    grid-template-columns: auto auto auto;
    padding: 10px;
    margin: auto;
  }
  .grid-item {
    padding: 30px;
    font-size: 30px;
    text-align: center;
    border: solid 35px;
    background-color: #999999;
    color: black;
    animation: fadeInAnimation ease 3s;
            animation-iteration-count: 1;
            animation-fill-mode: forwards;
        }
        @keyframes fadeInAnimation {
            0% {
                opacity: 0;
            }
            100% {
                opacity: 1;
            }
        }
  

  .show {display: block;}
  body {
    font-family:trebuchet MS;
  }
  /* Add a black background color to the top navigation bar */
.topnav {
  overflow: hidden;
  background-color: #e9e9e9;
}

/* Style the links inside the navigation bar */
.topnav a {
  float: left;
  display: block;
  color: black;
  text-align: center;
  padding: 14px 16px;
  text-decoration: none;
  font-size: 17px;
}

/* Change the color of links on hover */
.topnav a:hover {
  background-color: #ddd;
  color: black;
}

/* Style the "active" element to highlight the current page */
.topnav a.active {
  background-color: #2196F3;
  color: white;
}

/* Style the search box inside the navigation bar */
.topnav input[type=text] {
  float: right;
  padding: 6px;
  border: none;
  margin-top: 8px;
  margin-right: 16px;
  font-size: 17px;
}

/* When the screen is less than 600px wide, stack the links and the search field vertically instead of horizontally */
@media screen and (max-width: 600px) {
  .topnav a, .topnav input[type=text] {
    float: none;
    display: block;
    text-align: left;
    width: 100%;
    margin: 0;
    padding: 14px;
  }
  .topnav input[type=text] {
    border: 1px solid #ccc;
  }
}
/* jerry, please stop making the upload form visable. it is supposed to be invisable. */  
/* at the time, the search thingy kept becoming invisible along with the upload form, so i was trying to find a way to seperate those two at the time, (which was the reason i put the upload movie form inside a div) -J09 */  
form {
  display: none
}
.search-box {
  display: block;
}
html.dark, html.dark>body {
	background: black;
}
.white {
  color: white;
}
</style>  
<body onload="checkLoginStatus('get-user-info')">
<nav class="navbar navbar-inverse">
  <div class="container-fluid">
    <div class="navbar-header">
      <a class="navbar-brand" href="/">Redrawn Online ᵖᵒʷᵉʳᵉᵈ ᵇʸ ᴳᵒᵂᴰᴾᴷ</a>
    </div>
    <ul class="nav navbar-nav">
      <li class="active"><a href="/">Home</a></li>
      <li><a href="javascript:;" onclick="checkLoginStatus('create-video')">Create</a></li>
      <li><a href="javascript:;" onclick="checkLoginStatus('create-char')">Character Creator</a></li>
      <li>
        <div class="dropdown">
          <button onclick="document.getElementById('myDropdown').classList.toggle('show');" class="dropbtn">Explore <span class="glyphicon glyphicon-triangle-bottom"></button>
        
          <div id="myDropdown" class="dropdown-content">
            <a href="javascript:;" onclick="modalWindow('./export.html', 'WDPKRecorder')">WDPKRecorder</a>
            <a href="javascript:;" onclick="modalWindow('https://gowdpk.freeforums.net/', 'Community Forums')">Community</a>
            <a href="javascript:;" onclick="modalWindow('./uploader/main.html', 'Wrapper2WDPK Converter')">Wrapper2WDPK Converter</a>
            
          </div>
        </div>
      </li>
      <li><a href="javascript:;" onclick="modalWindow('https://www.youtube.com/@josephanimate', 'josephanimate - YouTube')">Joseph Animate's YouTube Channel</a></li>
      
    </ul>
    <ul class="nav navbar-nav navbar-right" id="options-right">
      <li><a href="javascript:;" onclick="document.getElementById('login-modal').style.display='block'"><span class="glyphicon glyphicon-log-in"></span> Login</a></li>
    </ul>
  </div>
</div>

  <!-- <div class="videoOfTheMonth">
    <h2>Video of the month:</h2>
    <div>
      <a href="javascript:modalWindow('m-34')"><img src="/movie_thumbs/m-34.png" height=240 width="320" alt="movieofthemonththumb"></a>
    </div>
  </div> -->
</nav>
<div class="w3-container">
  <h2>Your Videos</h2>
  <form action="/ajax/searchMovies" method="post" class='search-box'>
    <div id="search-box"><input class="searchbar" type="text" placeholder="Search via titles or tags"  width="50" name="search"></div>
  </form> 
  <div class="grid-container" id="videos-tray"></div>
  <p id="no-movies">Loading Videos...</p>
  <!-- Modals -->
  <div id="player-modal" class="w3-modal">
    <div class="w3-modal-content w3-animate-zoom">
      <header class="w3-container w3-teal"> 
        <span onclick="hideWindow()" class="w3-button w3-display-topright">&times;</span>
        <h2 id="video-title"></h2>
      </header>
      <div class="w3-container">
        <div id="video-player"></div>
      </div>
      <footer id="info" class="w3-container w3-teal">
        <center id="video-info"></center>
      </footer>
    </div>
  </div>
  <div id="web-modal" class="w3-modal">
    <div class="w3-modal-content w3-animate-zoom">
      <header class="w3-container w3-teal"> 
        <span onclick="document.getElementById('web-modal').style.display = 'none'" class="w3-button w3-display-topright">&times;</span>
        <h2 id="web-title"></h2>
      </header>
      <div class="w3-container">
        <div id="web"></div>
      </div>
      <footer class="w3-container w3-teal" id="site">
      </footer>
    </div>
  </div>
  <div id="chr-modal" class="w3-modal">
    <div class="w3-modal-content w3-animate-zoom">
      <header class="w3-container w3-teal"> 
        <span onclick="document.getElementById('chr-modal').style.display='none'" class="w3-button w3-display-topright">&times;</span>
        <h2>Select A Theme For Your Character</h2>
      </header>
      <div class="w3-container">
        <div class="grid-container">
          <div class="grid-item">
            <a href="/cc_browser?themeId=family"><img src="https://raw.githubusercontent.com/Wrapper-Offline/Wrapper-Offline/main/server/pages/img/themes/custom.jpg" alt="Comedy World"><br>Comedy World</a>
          </div>
          <div class="grid-item">
            <a href="/cc?themeId=cc2"><img src="https://raw.githubusercontent.com/Wrapper-Offline/Wrapper-Offline/main/server/pages/img/themes/action.jpg" alt="Lil' Peepz"><br>Lil' Peepz</a>
          </div><br>
          <div class="grid-item">
            <a href="/cc_browser?themeId=anime"><img src="https://raw.githubusercontent.com/Wrapper-Offline/Wrapper-Offline/main/server/pages/img/themes/anime.jpg" alt="Anime"><br>Anime</a>
          </div>
          <div class="grid-item">
            <a href="/cc_browser?themeId=ninjaanime"><img src="https://raw.githubusercontent.com/Wrapper-Offline/Wrapper-Offline/main/server/pages/img/themes/ninjaanime.jpg" alt="Ninja Anime"><br>Ninja Anime</a>
          </div><br>
          <div class="grid-item">
            <a href="/cc_browser?themeId=spacecitizen"><img src="https://raw.githubusercontent.com/Wrapper-Offline/Wrapper-Offline/main/server/pages/img/themes/spacecitizen.jpg" alt="Space Citizens"><br>Space Citizens</a>
          </div>
          <div class="grid-item">
            <a href="/cc_browser?themeId=chibi"><img src="https://raw.githubusercontent.com/Wrapper-Offline/Wrapper-Offline/main/server/pages/img/themes/chibi.jpg" alt="Chibi Peepz"><br>Chibi Peepz</a>
          </div><br>
          <div class="grid-item">
            <a href="/cc_browser?themeId=ninja"><img src="https://raw.githubusercontent.com/Wrapper-Offline/Wrapper-Offline/main/server/pages/img/themes/ninja.jpg" alt="Chibi Ninjas"><br>Chibi Ninjas</a>
          </div>
        </div>
      </div>
      <div class="w3-container w3-border-top w3-padding-16 w3-light-grey">
        <button onclick="document.getElementById('chr-modal').style.display='none'" type="button" class="w3-button w3-red">Cancel</button>
      </div>
      <footer class="w3-container w3-teal">
        <center><p>Please note that selecting a theme from the modal windows are currently in beta right now. please expect this to not work correctly.</p></center>
      </footer>
    </div>
  </div>
  <div id="create-modal" class="w3-modal">
    <div class="w3-modal-content w3-animate-zoom">
      <header class="w3-container w3-teal"> 
        <span onclick="document.getElementById('create-modal').style.display='none'" class="w3-button w3-display-topright">&times;</span>
        <h2>Select A Theme For Your Video</h2>
      </header>
      <div class="w3-container">
        <div class="grid-container">
          <div class="grid-item">
            <a href="javascript:;" onclick="redirect('custom')"><img src="https://raw.githubusercontent.com/Wrapper-Offline/Wrapper-Offline/main/server/pages/img/themes/custom.jpg" alt="Comedy World"><br>Comedy World</a>
          </div>
          <div class="grid-item">
            <a href="javascript:;" onclick="redirect('action')"><img src="https://raw.githubusercontent.com/Wrapper-Offline/Wrapper-Offline/main/server/pages/img/themes/action.jpg" alt="Lil' Peepz"><br>Lil' Peepz</a>
          </div><br>
          <div class="grid-item">
            <a href="javascript:;" onclick="redirect('anime')"><img src="https://raw.githubusercontent.com/Wrapper-Offline/Wrapper-Offline/main/server/pages/img/themes/anime.jpg" alt="Anime"><br>Anime</a>
          </div>
          <div class="grid-item">
            <a href="javascript:;" onclick="redirect('ninjaanime')"><img src="https://raw.githubusercontent.com/Wrapper-Offline/Wrapper-Offline/main/server/pages/img/themes/ninjaanime.jpg" alt="Ninja Anime"><br>Ninja Anime</a>
          </div><br>
          <div class="grid-item">
            <a href="javascript:;" onclick="redirect('spacecitizen')"><img src="https://raw.githubusercontent.com/Wrapper-Offline/Wrapper-Offline/main/server/pages/img/themes/spacecitizen.jpg" alt="Space Citizens"><br>Space Citizens</a>
          </div>
          <div class="grid-item">
            <a href="javascript:;" onclick="redirect('chibi')"><img src="https://raw.githubusercontent.com/Wrapper-Offline/Wrapper-Offline/main/server/pages/img/themes/chibi.jpg" alt="Chibi Peepz"><br>Chibi Peepz</a>
          </div><br>
          <div class="grid-item">
            <a href="javascript:;" onclick="redirect('ninja')"><img src="https://raw.githubusercontent.com/Wrapper-Offline/Wrapper-Offline/main/server/pages/img/themes/ninja.jpg" alt="Chibi Ninjas"><br>Chibi Ninjas</a>
          </div>
        </div>
      </div>
      <div class="w3-container w3-border-top w3-padding-16 w3-light-grey">
        <button onclick="document.getElementById('create-modal').style.display='none'" type="button" class="w3-button w3-red">Cancel</button>
      </div>
      <footer class="w3-container w3-teal">
        <center><p>Please note that selecting a theme from the modal windows are currently in beta right now. please expect this to not work correctly.</p></center>
      </footer>
    </div>
  </div>
  <div id="login-modal" class="w3-modal">
    <div class="w3-modal-content w3-card-4 w3-animate-zoom" style="max-width:600px">

    <div class="w3-center"><br>
      <span onclick="document.getElementById('login-modal').style.display='none'" class="w3-button w3-xlarge w3-hover-red w3-display-topright" title="Close Modal">&times;</span>
      <h5 id="log-in">Log In With A Replit Account</h5>
    </div>

    <embed id="replit-login" height="500" width="600" src="https://repl.it/auth_with_repl_site?domain=gowdpk.ga"></embed>

     <form class="w3-container" action="/ajax/account/staff/login" id="staff-login" method="POST">
        <div class="w3-section">
          <label><b>Discord Tag</b></label>
          <input class="w3-input w3-border w3-margin-bottom" type="text" placeholder="Enter Discord Tag" name="discord_tag" required> 
        </div>
      </form> 

    <div class="w3-container w3-border-top w3-padding-16 w3-light-grey">
      <center><h3>Login Help</h3></center><br>
      <p>Login Not Working? <a id="login_href" href="javascript:LoginWithReplit()">Click here</a></p>
      <p id="login-help">Using an older browser and login is not working? <a href="javascript:;" onclick="switchLogins('staff')">Login using your discord tag (Staff Members Only)</a></p>
    </div>

    </div>
  </div>
  <div id="error-modal" class="w3-modal">
    <div class="w3-modal-content w3-animate-zoom">
      <header class="w3-container w3-teal"> 
        <span onclick="document.getElementById('error-modal').style.display='none'" 
        class="w3-button w3-display-topright">&times;</span>
        <h2>Error</h2>
      </header>
      <div class="w3-container" id="error-text">
      </div>
    </div>
  </div>
  <form enctype='multipart/form-data' action='/upload_movie' method='post'>
    <input id='movie' type="file" name='import' accept=".zip,.xml" />
  </form>
<div class="user-stats">
  <table>
  <img src="">
</table>
</div>

  <script>
    const params = (new URLSearchParams(window.location.search));
    const error = params.get("errorMessage");
    const search = params.get("search_query");
    if (error) {
      document.getElementById('error-text').innerHTML = error;
      document.getElementById('error-modal').style.display = 'block';
    }
    function showError(message = "You're grounded!") {
      document.getElementById('error-text').innerHTML = message;
      document.getElementById('error-modal').style.display = 'block';
    }
    $.getJSON("/ajax/settings/list", (json) => {
      if (json.mode) {
        $("html").addClass("dark");
        if ($("html").hasClass("dark")) {
          $("h2").css("color", "white")
          $("p").css("color", "white")
        }
      }
    });
    function redirect(tray) { 
      location.href = `/go_full?tray=${tray}`;
    }
		var tbody = document.getElementById('videos-tray');
    var json;
		const listReq = new XMLHttpRequest();
		listReq.open('GET', '/movieList');
		listReq.send();
    if (listReq.responseText == "[]") document.getElementById('no-movies').innerHTML = `There are currently no videos yet...`
		function loadVideos() {
			for (const tbl of json) {
        document.getElementById('no-movies').style.display = 'none';
        const date = tbl.date.substr(0, 10) + ' ' + tbl.date.substr(11);
        // movie searching (beta)
        // also tags (beta too, it might help with the search feature for people to easily find it by putting the video's tag.)
        if (search == "") {
          document.getElementById('no-movies').innerHTML = `Please search something.`;
          document.getElementById('no-movies').style.display = 'block';
          return;
        }
        if (!search) tbody.insertAdjacentHTML('beforeend', `<div class="grid-item"><a href="javascript:;" onclick="modalWindow('${tbl.id}')"><img src="/movie_thumbs/${tbl.id}.png"></a><h5>${tbl.title}</h5><h5>tags:</h5><h5>${tbl.tag}</h5><h5>Created by:</h5><h5>${tbl.user.name}</h5></div>`);
        else {
          document.getElementById('search-box').innerHTML = `<input class="searchbar" value="${search}" type="text" placeholder="Search via titles or tags" name="search">`;
          document.getElementById('no-movies').innerHTML = `Here are the results to your query: ${search}.`;
          document.getElementById('no-movies').style.display = 'block';
          if (search.includes(tbl.tag)) tbody.insertAdjacentHTML('beforeend', `<div class="grid-item"><a href="javascript:;" onclick="modalWindow('${tbl.id}')"><img src="/movie_thumbs/${tbl.id}.png"></a><h5>${tbl.title}</h5></div>`);
          else if (search.includes(tbl.title)) tbody.insertAdjacentHTML('beforeend', `<div class="grid-item"><a href="javascript:;" onclick="modalWindow('${tbl.id}')"><img src="/movie_thumbs/${tbl.id}.png">""</a><h5>${tbl.title}</h5></div>`);
        }
			}
		}
    listReq.onreadystatechange = function (e) {
			if (listReq.readyState != 4) return;
			json = JSON.parse(listReq.responseText);
			loadVideos();
		}
    function modalWindow(id, command) {
      if (!id.startsWith("m")) {
        document.getElementById('web').innerHTML = `<embed height="420" width="870" src="${id}"></embed>`;
        document.getElementById('web-title').innerHTML = command;
        document.getElementById('site').innerHTML = `Site Not Working? <a href="${id}">Click Here</a>.`;
        document.getElementById('web-modal').style.display = 'block';
      } else {
        fetch(`/meta/${id}`).then(data => {
          data.json().then(tbl => {
            if (command == 'disablefooter') document.getElementById('info').style.display = 'none';
            else document.getElementById('info').style.display = 'block';
            var editMode = `<a href="/remix?movieId=${tbl.id}">Remix</a> `;
            document.getElementById('video-title').innerHTML = `${tbl.title}`;
            document.getElementById('video-player').innerHTML = `<iframe width="870" height="420" style="border: 0" src="/player?movieId=${tbl.id}"></iframe>`;
            document.getElementById('video-info').innerHTML = `${editMode}<a href="/movies/${tbl.id}.zip">Download</a>`
              document.getElementById('player-modal').style.display='block';
          });
        });
      }
    }
    function hideWindow() {
      document.getElementById('video-player').innerHTML = ``;
      document.getElementById('player-modal').style.display='none'
    }
    window.onclick = function(event) {
      if (!event.target.matches('.dropbtn')) {
        var dropdowns = document.getElementsByClassName("dropdown-content");
        var i;
        for (i = 0; i < dropdowns.length; i++) {
          var openDropdown = dropdowns[i];
          if (openDropdown.classList.contains('show')) openDropdown.classList.remove('show');
        }
      }
    }
    function switchLogins(type) {
      switch (type) {
        case "staff": {
          document.getElementById('replit-login').style.display = "none";
          document.getElementById('staff-login').style.display = "block";
          document.getElementById('log-in').innerHTML = 'Log In With A Staff Account';
          document.getElementById('login-help').innerHTML = 'Are you a staff member and you want to login with a replit account? <a href="javascript:;" onclick="switchLogins(\'replit\')">Login using your replit account</a>. Note: if you are using an older browser, then its highly recommended that you login here as signing in with a replit account wont work on older browsers from what one of our staff members know.'
          document.getElementById('login_href').href = "https://discord.gg/qGgEHaXCGP";
          break
        } case "replit": {
          document.getElementById('staff-login').style.display = "none";
          document.getElementById('replit-login').style.display = "block";
          document.getElementById('log-in').innerHTML = 'Log In With A Replit Account';
          document.getElementById('login-help').innerHTML = 'Using an older browser and login is not working? <a href="javascript:;" onclick="switchLogins(\'staff\')">Login using your discord tag (Staff Members Only)</a>'
          document.getElementById('login_href').href = "javascript:LoginWithReplit()"
          break
        }
      }
    }
    function checkLoginStatus(type) {
      $.getJSON("/ajax/userInfo", (json) => {
        switch (type) {
          case "get-user-info": {
            if (json) document.getElementById('options-right').innerHTML = `<li class="dropdown">
          <button onclick="document.getElementById('accDropdown').classList.toggle('show');" class="dropbtn">Your Account <span class="glyphicon glyphicon-triangle-bottom"></button>
        
          <div id="accDropdown" class="dropdown-content">
            <a href="/videos/list/${json.name}">Your Videos</a>
            <a href="./settings.html">Settings</a>
            <a href="https://replit.com/@${json.name}">Your Replit Account</a>
            
          </div>
        </div>
      </li>`;
            break;
          } case "create-video": {
            if (json) document.getElementById('create-modal').style.display = 'block';
            else showError("You need to login to your replit account in order to make videos.");
            break;
          } case "create-char": {
            if (json) document.getElementById('chr-modal').style.display = 'block';
            else showError("You need to login to your replit account in order to make characters.");
            break;
          }
        }
      });
    }
</script>
<div class="user-videos">
  
</div>
</div>